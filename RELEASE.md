# CUMS v1.0.2 Release

## 📝 版本简介

CUMS (Classroom Upload Management System) v1.0.2 是一个专为机房环境设计的文件上传系统，支持多班级、多科目、多作业的上传管理。

## ✨ 新增功能

### 🎯 网络优化
- **局域网访问支持**: 现在监听 `0.0.0.0:3000`，同一局域网内的设备均可访问
- **智能端口处理**: 当端口被占用时，自动尝试下一个可用端口 (3001, 3002...)

### 📋 上传日志
- 控制台实时输出：`[2026-01-20 19:48:39] 二班 01号张三提交实验报告作业`
- 日志文件保存：`cums/logs/cums.log`

### 🎨 界面优化
- 班级选择改为下拉菜单，操作更便捷

## 🚀 快速开始

### 方式一：直接运行

```bash
# Windows
cums_1.0.2_202601202002.exe

# Linux
chmod +x cums_1.0.2_202601202002
./cums_1.0.2_202601202002

# macOS
chmod +x cums_1.0.2_202601202002
./cums_1.0.2_202601202002
```

### 方式二：自定义配置

修改 `cums/config.json`：

```json
{
    "version": "1.0.2",
    "server_addr": ":3000",
    "upload_dir": "uploads",
    "classes": {
        "一班": {
            "subjects": {
                "数学": [
                    { "name": "第一章作业" }
                ]
            }
        }
    }
}
```

## 📁 目录结构

```
cums/
├── cums.exe                    # 可执行文件
├── cums/                       # 数据目录（首次运行自动创建）
│   ├── config.json            # 配置文件
│   ├── static/
│   │   └── index.html         # 前端页面
│   ├── uploads/               # 上传文件目录
│   └── logs/
│       └── cums.log           # 上传日志
```

## 🔧 配置说明

### 班级配置

```json
"classes": {
    "一班": {
        "subjects": {
            "数学": [
                { "name": "第一章作业" },
                { "name": "第二章作业", "upload_path": "D:/files/math" }
            ]
        }
    }
}
```

### 自定义存储路径

每个作业可以单独设置上传路径：

```json
{
    "name": "实验报告",
    "upload_path": "D:/实验报告存储路径"
}
```

未指定则使用默认路径：`cums/uploads/{班级}/{科目}/{作业名}/`

## 📊 功能特性

| 功能 | 说明 |
|------|------|
| 用户登录 | 班级选择 + 学号 + 姓名 |
| 科目选择 | 根据登录班级动态加载 |
| 作业选择 | 根据所选科目动态加载 |
| 文件上传 | 支持任意文件类型和大小 |
| 自动重命名 | `{作业名}_{学号}_{姓名}_{时间戳}.{扩展名}` |
| 日志记录 | 控制台 + 文件双输出 |
| 跨平台 | Windows / Linux / macOS |

## 🌐 访问地址

- 本机访问：`http://localhost:3000`
- 局域网访问：`http://<你的IP>:3000`

## 📋 更新日志

### v1.0.2 (2026-01-20)
- ✅ 新增：局域网访问支持 (0.0.0.0)
- ✅ 新增：端口自动检测和切换
- ✅ 优化：班级选择下拉菜单
- ✅ 修复：日志重复显示"班"字

### v1.0.1 (2026-01-20)
- ✅ 新增：文件上传日志记录
- ✅ 新增：控制台实时输出
- ✅ 新增：日志文件保存
- ✅ 优化：自动创建数据目录

### v1.0.0 (2026-01-20)
- 🎉 初始版本发布
- 🎉 文件上传系统
- 🎉 班级/科目/作业配置
- 🎉 跨平台支持

## 🔒 注意事项

1. 首次运行会自动创建 `cums/` 目录
2. 日志文件会自动创建在 `cums/logs/` 目录
3. 端口被占用时自动尝试下一个端口
4. 修改配置后需要重启服务

## 📦 下载文件

| 平台 | 文件名 | 大小 |
|------|--------|------|
| Windows | cums_1.0.2_202601202002.exe | ~6.0 MB |
| Linux | cums_1.0.2_202601202002 | ~5.8 MB |
| macOS | cums_1.0.2_202601202002 | ~5.9 MB |

## 📞 联系方式

- GitHub: https://github.com/OXY20/cums
- Issues: https://github.com/OXY20/cums/issues

---

**CUMS v1.0.2** - 让机房文件上传更简单！
